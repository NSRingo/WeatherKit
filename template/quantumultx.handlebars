#!name = {{@package 'displayName'}}
#!desc = {{inline (@package 'description')}}
#!openUrl = {{@package 'openUrl'}}
#!author = {{@package 'contributors'}}
#!homepage = {{@package 'homepage'}}
#!icon = {{@package 'icon'}}
#!category = {{@package 'organizationName'}}
#!date = {{now "yyyy-MM-dd HH:mm:ss"}}
#!version = {{@package 'version'}}

#[rewrite_local]
# ðŸŒ¤ ï£¿WeatherKit.api.v1.availability.response
^https?:\/\/weatherkit\.apple\.com\/api\/v1\/availability\/ url script-response-body https://github.com/NSRingo/WeatherKit/releases/download/v{{@package 'version'}}/response.bundle.js
# ðŸŒ¤ ï£¿WeatherKit.api.v1.weather.request
^https?:\/\/weatherkit\.apple\.com\/api\/v2\/weather\/ url script-request-header https://github.com/NSRingo/WeatherKit/releases/download/v{{@package 'version'}}/request.bundle.js
# ðŸŒ¤ ï£¿WeatherKit.api.v2.weather.response
^https?:\/\/weatherkit\.apple\.com\/api\/v2\/weather\/ url script-response-body https://github.com/NSRingo/WeatherKit/releases/download/v{{@package 'version'}}/response.bundle.js
# ðŸŒ¤ ï£¿Weather Analytics
^https?:\/\/weather-analytics-events\.apple\.com\/ url reject

#[mitm]
hostname = weatherkit.apple.com, weather-analytics-events.apple.com, *.tthr.apple.com
